function control_value = dmc_a_coder(AD_Y,AD_U,AD_DU,AD_Z,AD_K,umin,umax,dumin,dumax)
AutoMATiC_DMC_Ke = single([0.679871428665432 -0.04245429717355;0.0157355341194714 0.702137064543831]);
AutoMATiC_DMC_Ku = single([0.62639707147043 0.0258539719115535 0.23043860460397 0.00951114473888448 0.0847736250860354 0.00349895461144153 0.0311864738227281 0.00128719346714135 0.011472862562013 0.000473532013371494 0.00422063026795013 0.000174202692455891 0.00155268310436478 6.40855891512335e-05 0.000571200192750024 2.35757707240964e-05 0.000210132807705903 8.67304135916489e-06 7.73035398706064e-05 3.19063360846345e-06 2.84383830481853e-05 1.17376850886424e-06 1.04618973072758e-05 4.3180535994224e-07 3.84871869258977e-06 1.58852724104738e-07 1.41586642028151e-06 5.84400593575251e-08 5.20865971811089e-07 2.15024092527151e-08 1.91594784412726e-07 7.91717886048113e-09 7.04042688621118e-08 2.92277671278239e-09 2.56773253205884e-08 1.0839245438481e-09 8.94192717696703e-09 3.9214492362825e-10 2.40485463724047e-09 1.05464016249722e-10;0.0258539719115534 0.586871168649716 0.00951114473888445 0.215897837562489 0.00349895461144151 0.0794243758326113 0.00128719346714135 0.0292185949966916 0.00047353201337149 0.0107489203991976 0.000174202692455891 0.00395430682965314 6.40855891512345e-05 0.00145470818671324 2.35757707240968e-05 0.000535157234795637 8.67304135916573e-06 0.000196873344475494 3.19063360846588e-06 7.24256559472069e-05 1.1737685088661e-06 2.66439098363405e-05 4.31805359948502e-07 9.80174741800231e-06 1.5885272411039e-07 3.60586249402146e-06 5.84400593523933e-08 1.32652246510425e-06 2.15024092463133e-08 4.87992796939851e-07 7.91717885814912e-09 1.79490893972948e-07 2.92277671169475e-09 6.59358881370393e-08 1.08392454429694e-09 2.40202067843698e-08 3.92144931063029e-10 8.34241069582989e-09 1.05464016432081e-10 2.24361976377959e-09]);
AutoMATiC_DMC_D  = int32(21);
AutoMATiC_DMC_ny = int32(2);
AutoMATiC_DMC_nu = int32(2);
N  = int32(10);
Nu = int32(10);


%% TRANSLATE -- variables created in this section will be declared from scratch
AutoMATiC_DMC_dUp  = single(zeros(AutoMATiC_DMC_nu*(AutoMATiC_DMC_D-1),1));
AutoMATiC_DMC_tmpu = single(zeros(AutoMATiC_DMC_nu,1));
%Y0tmp1 = zeros(ny*N,1);

%Y0   = zeros(ny*N,1);
AutoMATiC_DMC_itmp = 1;
for AutoMATiC_DMC_i = 1:(AutoMATiC_DMC_D-1)
    for AutoMATiC_DMC_j = 1:AutoMATiC_DMC_nu
        AutoMATiC_DMC_dUp(AutoMATiC_DMC_itmp,1) = AD_DU(AD_K-AutoMATiC_DMC_i,AutoMATiC_DMC_j);
        AutoMATiC_DMC_itmp = AutoMATiC_DMC_itmp+1;
    end
end

%% wyznaczenie du (optymalnie)
AutoMATiC_DMC_e=zeros(AutoMATiC_DMC_ny,1);
for AutoMATiC_DMC_i=1:AutoMATiC_DMC_ny
    AutoMATiC_DMC_e(AutoMATiC_DMC_i,1) = AD_Z(AutoMATiC_DMC_i)-AD_Y(AD_K,AutoMATiC_DMC_i);
end
AutoMATiC_DMC_dutmp1 = AutoMATiC_DMC_Ke*AutoMATiC_DMC_e;
AutoMATiC_DMC_dutmp2 = AutoMATiC_DMC_Ku*AutoMATiC_DMC_dUp;
AutoMATiC_DMC_du = AutoMATiC_DMC_dutmp1 - AutoMATiC_DMC_dutmp2;  

for AutoMATiC_DMC_n=1:AutoMATiC_DMC_nu
    if(AutoMATiC_DMC_du(AutoMATiC_DMC_n,1)>dumax); AutoMATiC_DMC_du(AutoMATiC_DMC_n,1) = dumax; end
    if(AutoMATiC_DMC_du(AutoMATiC_DMC_n,1)<dumin); AutoMATiC_DMC_du(AutoMATiC_DMC_n,1) = dumin; end
    AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1) = AD_U(AD_K-1,AutoMATiC_DMC_n) + AutoMATiC_DMC_du(AutoMATiC_DMC_n,1);
    if(AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1)>umax); AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1) = umax; end
    if(AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1)<umin); AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1) = umin; end
    AutoMATiC_DMC_du(AutoMATiC_DMC_n,1) = AutoMATiC_DMC_tmpu(AutoMATiC_DMC_n,1) - AD_U(AD_K-1,AutoMATiC_DMC_n);
end

control_value = zeros(1,AutoMATiC_DMC_nu);
for AutoMATiC_DMC_n=1:AutoMATiC_DMC_nu
    control_value(1,AutoMATiC_DMC_n) = AutoMATiC_DMC_du(AutoMATiC_DMC_n,1);
end
end
%% STOP
