global MPC_CROSSCOMPILER

%% PID parameters
Kk = 75;
Tk = 20;
pid_par = [45.0, 10.0, 2.5, 1.0]; % K, Ti, Td, T
pid_par = [Kk*0.45, Tk/1.2, nan, 1.0]; % K, Ti, Td, T

%% DMC parameters
odpowiedz = [40.180000,40.180000,40.250000,40.250000,40.310000,40.370000,40.500000,40.620000,40.750000,40.870000,41.060000,41.180000,41.310000,41.500000,41.620000,41.750000,41.930000,41.930000,42.120000,42.250000,42.370000,42.560000,42.680000,42.870000,43.000000,43.180000,43.310000,43.430000,43.620000,43.810000,44.000000,44.000000,44.180000,44.370000,44.560000,44.750000,44.930000,45.120000,45.310000,45.500000,45.620000,45.810000,45.930000,46.060000,46.250000,46.250000,46.370000,46.500000,46.680000,46.810000,47.000000,47.120000,47.250000,47.430000,47.620000,47.750000,47.870000,48.000000,48.120000,48.120000,48.310000,48.500000,48.620000,48.810000,49.000000,49.180000,49.370000,49.560000,49.680000,49.810000,50.000000,50.120000,50.310000,50.310000,50.430000,50.560000,50.680000,50.810000,50.930000,51.060000,51.180000,51.310000,51.430000,51.560000,51.680000,51.810000,51.930000,51.930000,52.120000,52.250000,52.310000,52.430000,52.560000,52.680000,52.810000,52.870000,53.000000,53.120000,53.180000,53.310000,53.430000,53.500000,53.500000,53.620000,53.680000,53.810000,53.870000,54.000000,54.120000,54.250000,54.310000,54.430000,54.500000,54.560000,54.620000,54.620000,54.750000,54.810000,54.870000,54.930000,55.000000,55.060000,55.120000,55.180000,55.250000,55.310000,55.370000,55.430000,55.500000,55.500000,55.560000,55.620000,55.750000,55.810000,55.870000,55.930000,56.060000,56.120000,56.180000,56.310000,56.370000,56.430000,56.500000,56.500000,56.560000,56.680000,56.680000,56.750000,56.810000,56.870000,56.930000,57.000000,57.060000,57.120000,57.180000,57.310000,57.310000,57.310000,57.370000,57.430000,57.500000,57.560000,57.560000,57.620000,57.680000,57.750000,57.750000,57.870000,57.870000,57.930000,57.930000,57.930000,58.000000,58.000000,58.000000,58.060000,58.060000,58.120000,58.180000,58.250000,58.310000,58.310000,58.310000,58.370000,58.430000,58.430000,58.500000,58.500000,58.500000,58.560000,58.560000,58.560000,58.620000,58.620000,58.620000,58.680000,58.680000,58.680000,58.680000,58.680000,58.750000,58.810000,58.870000,58.930000,59.000000,59.120000,59.120000,59.180000,59.250000,59.310000,59.310000,59.310000,59.310000,59.310000,59.370000,59.370000,59.370000,59.370000,59.430000,59.500000,59.500000,59.620000,59.620000,59.680000,59.750000,59.750000,59.810000,59.810000,59.810000,59.870000,59.870000,59.810000,59.810000,59.810000,59.750000,59.750000,59.750000,59.680000,59.680000,59.750000,59.750000,59.750000,59.750000,59.750000,59.810000,59.810000,59.810000,59.810000,59.870000,59.870000,59.810000,59.810000,59.870000,59.870000,59.870000,59.870000,59.870000,59.870000,59.870000,59.930000,59.930000,59.930000,59.930000,60.000000,60.000000,60.000000,60.000000,60.060000,60.060000,60.060000,60.120000,60.120000,60.180000,60.250000,60.310000,60.310000,60.370000,60.370000,60.370000,60.370000,60.370000,60.430000,60.430000,60.430000,60.430000,60.430000,60.430000,60.430000,60.430000,60.500000,60.500000,60.560000,60.560000,60.620000,60.680000,60.680000,60.680000,60.680000,60.750000,60.750000,60.680000,60.680000,60.680000,60.680000,60.680000,60.680000,60.680000,60.680000,60.750000,60.810000,60.870000,60.870000,60.930000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.000000,61.060000,61.060000,61.120000,61.180000,61.180000,61.250000,61.180000,61.250000,61.180000,61.180000,61.120000,61.180000,61.120000,61.120000,61.120000,61.120000,61.120000,61.120000,61.120000,61.120000,61.120000,61.120000,61.180000,61.180000,61.180000,61.250000,61.250000,61.250000,61.310000,61.370000,61.310000,61.310000,61.370000,61.370000,61.430000,61.430000,61.430000,61.430000,61.430000,61.500000,61.500000,61.500000,61.500000,61.500000,61.500000,61.560000,61.500000,61.560000,61.560000,61.500000,61.500000,61.500000,61.500000,61.500000,61.430000,61.430000,61.430000,61.430000,61.430000,61.430000,61.430000,61.500000,61.500000,61.560000,61.560000,61.560000,61.560000,61.560000,61.560000,61.560000];
D = 150;
S = (odpowiedz((1:D)+2)-odpowiedz(1))/25;
N  = 20;
Nu =  15;
lambda = 0.1;

%% Code generation
if(MPC_CROSSCOMPILER == 1)
    generate(PID(pid_par),'PID');
    generate(DMC_analitic(S,N,Nu,lambda,[],[],[],[]),'DMC');
    return;
end

%% Optional simulation
fprintf('Tutaj mozna przeprowadzic symulacje...\n');
